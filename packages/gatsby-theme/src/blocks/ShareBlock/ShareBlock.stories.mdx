import { Meta, Story, Props, Preview } from "@storybook/addon-docs/blocks"
import { useArgs } from "@storybook/client-api"
import _ from "lodash"
import ShareBlock from "."

export const config = [
  {
    social: "twitter",
    title: "Octahedroid About Page",
    to: "https://octahedroid.com/about/",
    handler: "Octonauts",
    hashtags: ["Octonautas", "Octahedroid"],
    disabled: false,
  },
  {
    social: "linkedin",
    source: "The source",
    summary: "A summary",
    disabled: false,
  },
  {
    social: "whatsapp",
    separator: "/",
    disabled: false,
  },
  {
    social: "facebook",
    to: "https://octahedroid.com/",
    title: "Octahedroid",
    disabled: false,
  },
  {
    social: "reddit",
    to: "https://octahedroid.com/",
    title: "Octahedroid",
    disabled: false,
  },
]

export const shareArgTypes = {
  disabledOptions: {
    control: {
      type: "check",
      options: ["facebook", "linkedin", "reddit", "twitter", "whatsapp"],
    },
  },
}

<Meta title='blocks/ShareBlock' component={ShareBlock} />

# ShareBlock

## Props

<Props of={ShareBlock} />

export const ShareBlockTemplate = ({ disabledOptions }) => {
  const [args, setArgs] = useArgs()
  const disabledSettings = []
  if (disabledOptions) {
    config.forEach((item) => {
      const disabled = disabledOptions.some((option) => option === item.social)
      console.log(disabledOptions)
      disabledSettings.push({
        ...item,
        disabled,
      })
    })
    // setArgs({ config: disabledSettings })
  }
  if (!_.isEqual(disabledSettings, args.config) && disabledSettings.length > 0) {
    console.log("hh", disabledSettings)
    setArgs({ config: disabledSettings })
  }
  // if (disabledOptions) {
  //   disabledOptions.forEach((option) => {
  //     config.filter((item) => item.social === option)
  //     disabledSettings[el] = true
  //   })
  // if (!_.isEqual(disabledSettings, args.disabled)) {
  //   setArgs({ disabled: disabledSettings })
  // }
  console.log("args", args)
  return <ShareBlock {...args} />
}

### Default ShareBlock

<Preview>
  <Story name='Default' args={{ config }} argTypes={shareArgTypes}>
    {ShareBlockTemplate.bind({})}
  </Story>
</Preview>

### Different heading

<Preview>
  <Story
    name='Different heading'
    args={{ config, heading: "Comparte:" }}
    argTypes={shareArgTypes}
  >
    {ShareBlockTemplate.bind({})}
  </Story>
</Preview>
